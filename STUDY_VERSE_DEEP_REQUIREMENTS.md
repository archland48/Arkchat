# study_verse_deep 输出要求

## 概述

`study_verse_deep` 的输出内容必须包含以下 4 个必需元素：

1. **經文解釋（註明出處）**
2. **歷史背景**
3. **交叉引用**
4. **反思提示**

---

## 必需輸出元素

### 1. 經文解釋（註明出處）- REQUIRED

**要求**:
- ✅ **必須明確標註出處**
  - 例如："根據CBOL註釋..."、"根據[註釋書名稱]..."、"According to [Commentary Name]..."
- ✅ **優先使用**上下文中的註釋數據（commentary data）
- ✅ 如果上下文沒有註釋，可以使用知識庫搜索相關註釋
- ✅ **交叉確認**: 將知識庫的註釋與 FHL API 的經文內容進行對比，確保一致性

**內容**:
- 解釋經文的含義
- 說明上下文
- 闡述神學意義

**格式**:
```
【註釋出處】[經文解釋內容]
```

**示例**:
```
【CBOL註釋】約翰福音 3:16 是聖經中最著名的經文之一，表達了神對世人的愛...
【馬太亨利註釋】這節經文揭示了神救恩計劃的核心...
```

---

### 2. 歷史背景 - REQUIRED

**要求**:
- ✅ **優先使用**上下文中的歷史背景信息（如果 FHL API 提供）
- ✅ 如果上下文沒有歷史背景，使用知識庫搜索相關信息
- ✅ **交叉確認**: 確保歷史背景信息與 FHL API 的經文和註釋數據一致
- ✅ **標註來源**: 明確說明歷史背景信息的來源（FHL API 或知識庫）

**內容**:
- 解釋寫作時的歷史和文化背景
- 描述作者、目標讀者、時代背景
- 包含相關的歷史事件、習俗或社會背景
- 說明背景如何影響經文的含義

**格式**:
```
## 歷史背景

[歷史背景內容]

**來源**: [FHL API / 知識庫]
```

**示例**:
```
## 歷史背景

約翰福音寫於主後 90-100 年，當時羅馬帝國統治下，猶太人面臨政治和宗教壓力...
這節經文寫給早期教會的信徒，鼓勵他們在困難中持守信心...

**來源**: 知識庫（與 FHL API 數據交叉確認）
```

---

### 3. 交叉引用 - REQUIRED

**要求**:
- ✅ **優先使用**上下文中的交叉引用經文（cross-reference verses）
- ✅ **如果上下文包含 "[Advanced Cross-Reference Analysis - 進階交叉引用分析 (三層次)]"**:
  - **必須使用**三層次交叉引用分析數據
  - **Layer 1**: 使用直接引用關係的經文（Direct References）
  - **Layer 2**: 使用主題相關經文（Thematic Connections）
  - **Layer 3**: 使用對照經文（Contrasting/Complementary Verses）
  - 按照三層次結構組織交叉引用內容
- ✅ 如果上下文中的交叉引用不足，可以使用知識庫搜索相關經文
- ✅ **交叉確認**: 必須與 FHL API 返回的經文進行對比，確保引用經文的準確性
- ✅ **標註來源**: 明確說明交叉引用經文的來源（FHL API 或知識庫）

**內容**:
- 列出 5-10 處相關經文，引用相似的主題、概念或字詞
- 說明這節經文如何與聖經其他部分連接
- 包含舊約和新約的連接（如適用）
- 簡要說明每個引用如何與當前經文相關

**格式**:
```
## 交叉引用

相關經文：約翰一書 4:9-10, 羅馬書 5:8, 以弗所書 2:4-5...

**Layer 1: 直接引用關係**
- 約翰一書 4:9 - [說明如何相關]

**Layer 2: 主題相關經文**
- 羅馬書 5:8 - [說明主題連接]

**Layer 3: 對照經文**
- [對照經文] - [說明對照關係]

**來源**: [FHL API / 知識庫]
```

**示例**:
```
## 交叉引用

相關經文：約翰一書 4:9-10, 羅馬書 5:8, 以弗所書 2:4-5, 約翰一書 4:16

**Layer 1: 直接引用關係**
- 約翰一書 4:9 - 同樣強調神對世人的愛，通過差遣獨生子顯明

**Layer 2: 主題相關經文**
- 羅馬書 5:8 - 說明神在我們還作罪人的時候就愛我們

**來源**: FHL API
```

---

### 4. 反思提示 - REQUIRED

**要求**:
- ✅ 提供 2-3 個深思的反思問題
- ✅ 幫助讀者將經文應用到生活中
- ✅ 鼓勵更深的屬靈成長和實際應用
- ✅ 問題應該具體且可操作

**格式**:
```
## 反思提示

1. [問題1]
2. [問題2]
3. [問題3]
```

**示例**:
```
## 反思提示

1. 這節經文如何改變你對神愛的認識？你如何將這份愛傳遞給他人？
2. 在你的日常生活中，你如何回應神為你付出的這份愛？
3. 這節經文如何激勵你在困難中持守信心？
```

---

## 完整輸出結構

### study_verse_deep 輸出格式

```
# 深入研讀經文 - [書卷] [章]:[節]

## 步驟 1: 獲取經文內容
[經文內容及 Strong's Number 版本]

## 步驟 2: 分析原文字彙
[原文分析]

## 步驟 3: 研究關鍵字詞
[Strong's 字典查詢結果]

## 步驟 4: 查詢註釋解經
### 經文解釋（註明出處）✅
【註釋出處】[經文解釋內容]

## 步驟 5: 連結相關經文
### 交叉引用 ✅
[交叉引用經文列表及說明]

## 步驟 6: 綜合研讀總結
### 歷史背景 ✅
[歷史背景內容]

### 核心信息
[核心信息總結]

### 神學意義
[神學意義說明]

### 實際應用
[實際應用建議]

### 反思提示 ✅
1. [問題1]
2. [問題2]
3. [問題3]
```

---

## 數據優先級

### 1. 第一優先: FHL Bible API 數據
- 優先使用 API 返回的經文內容
- 優先使用 API 返回的註釋（必須註明出處）
- 優先使用 API 返回的交叉引用經文

### 2. 第二優先: 知識庫補充
- 當 API 數據不完整時，使用知識庫搜索相關信息
- **重要**: 必須與 FHL Bible API 的內容進行交叉確認
- 比較不同來源的數據，確保一致性
- 如果發現差異，優先採用 FHL API 的數據

### 3. 必須標註
- 明確區分哪些內容來自 FHL API，哪些來自知識庫
- FHL API 數據：標註為 "根據 FHL Bible API..."、"根據 FHL 註釋..."
- 知識庫數據：標註為 "根據知識庫..."、"補充說明..."
- 交叉確認：標註為 "與 FHL API 數據交叉確認後..."

---

## 總結

✅ **必需元素**:
1. ✅ 經文解釋（註明出處）
2. ✅ 歷史背景
3. ✅ 交叉引用
4. ✅ 反思提示

✅ **要求**:
- 所有元素都必須包含在輸出中
- 必須明確標註出處
- 優先使用 FHL API 數據
- 與 FHL API 數據交叉確認

現在 `study_verse_deep` 會確保輸出包含所有必需元素！
